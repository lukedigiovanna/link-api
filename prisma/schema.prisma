generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Post {
  id         Int        @id @default(autoincrement())
  user_id    String?
  body       String?
  created_at DateTime   @default(now()) @db.Timestamp(6)
  is_reply   Boolean?
  User       User?      @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  Reactions  Reaction[]
  Replies    Replies[]

  @@map("posts")
}

model Reaction {
  id       Int      @id
  post_id  Int?
  user_id  String?
  reaction Emotion?
  Posts    Post?    @relation(fields: [post_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  Users    User?    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("reactions")
}

model Replies {
  id      Int   @id
  post_id Int?
  Posts   Post? @relation(fields: [post_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("replies")
}

model User {
  id        String     @id
  username  String?    @unique
  Posts     Post[]
  Reactions Reaction[]

  @@map("users")
}

enum Emotion {
  like
  dislike
  love
  haha
  wow
  sad
  angry

  @@map("emotion")
}
